/*! DataTables Editor v2.3.2
 *
 * © SpryMedia Ltd, all rights reserved.
 * License: editor.datatables.net/license
 */
!function(i){var n,s;"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return i(t,window,document)}):"object"==typeof exports?(n=require("jquery"),s=function(t,e){e.fn.dataTable||require("datatables.net")(t,e)},"undefined"==typeof window?module.exports=function(t,e){return t=t||window,e=e||n(t),s(t,e),i(e,t,t.document)}:(s(window,n),module.exports=i(n,window,window.document))):i(jQuery,window,document)}(function(w,p,y){"use strict";var r=w.fn.dataTable,t={buttons:!0,drawType:!1,focus:0,message:!0,nest:!1,onBackground:"blur",onBlur:"close",onComplete:"close",onEsc:"close",onFieldError:"focus",onReturn:"submit",scope:"row",submit:"all",submitHtml:"▶",submitTrigger:null,title:!0},R={actionName:"action",ajax:null,display:"lightbox",events:{},fields:[],formOptions:{bubble:w.extend({},t,{buttons:"_basic",message:!1,submit:"changed",title:!1}),inline:w.extend({},t,{buttons:!1,submit:"changed"}),main:w.extend({},t)},i18n:{close:"Close",create:{button:"New",submit:"Create",title:"Create new entry"},datetime:{amPm:["am","pm"],hours:"Hour",minutes:"Minute",months:["January","February","March","April","May","June","July","August","September","October","November","December"],next:"Next",previous:"Previous",seconds:"Second",unknown:"-",weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},edit:{button:"Edit",submit:"Update",title:"Edit entry"},error:{system:'A system error has occurred (<a target="_blank" href="//datatables.net/tn/12">More information</a>).'},multi:{info:"The selected items contain different values for this input. To edit and set all items for this input to the same value, click or tap here, otherwise they will retain their individual values.",noMulti:"This input can be edited individually, but not part of a group.",restore:"Undo changes",title:"Multiple values"},remove:{button:"Delete",confirm:{1:"Are you sure you wish to delete 1 row?",_:"Are you sure you wish to delete %d rows?"},submit:"Delete",title:"Delete"}},idSrc:"DT_RowId",table:null},B={action:null,actionName:"action",ajax:null,bubbleNodes:[],bubbleBottom:!1,bubbleLocation:"auto",closeCb:null,closeIcb:null,dataSource:null,displayController:null,displayed:!1,editCount:0,editData:{},editFields:{},editOpts:{},fields:{},formOptions:{bubble:w.extend({},t),inline:w.extend({},t),main:w.extend({},t)},globalError:"",id:-1,idSrc:null,includeFields:[],mode:null,modifier:null,opts:null,order:[],processing:!1,setFocus:null,table:null,template:null,unique:0},L=w.fn.dataTable;function a(t,e){return w('*[data-dte-e="'+t+'"]',e=void 0===e?y:e)}function c(t,e){return void 0===e&&(e="#"),"string"==typeof t?e+t.replace(/(:|\.|\[|\]|,)/g,"\\$1"):e+t}function u(t){return L.util.get(t)}function _(t){return L.util.set(t)}function f(t,i){var n=[];return w.each(t,function(t,e){n.push(e[i])}),n}function l(t,e){if("object"!=typeof t||"object"!=typeof e||null===t||null===e)return t==e;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(var s=0,o=i.length;s<o;s++){var r=i[s];if("object"==typeof t[r]){if(!l(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1}return!0}function d(t,e){var i,n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i=e[n],w.isPlainObject(i)?(w.isPlainObject(t[n])||(t[n]={}),w.extend(!0,t[n],i)):Array.isArray(i)?t[n]=i.slice():t[n]=i);return t}function h(t,e){return t.settings()[0].oFeatures.bServerSide&&"none"!==e.s.editOpts.drawType}function m(t){return t instanceof w.fn.dataTable.Api?t:w(t).DataTable()}function M(t){t=w(t),setTimeout(function(){t.addClass("dte-highlight"),setTimeout(function(){t.removeClass("dte-highlight")},1e3)},20)}function U(l,d,u,c,p,f){void 0===f&&(f=null);var h=d.cells(u);h.indexes().each(function(t){var e,i,n,s=d.cell(t),o=d.row(t.row).data(),o=p(o),r=f||H(d,c,t.column,1<h.count()),a="object"==typeof u&&u.nodeName||u instanceof w;Object.keys(r).length&&(l[o]&&(i=l[o].attach,n=l[o].attachFields,e=l[o].displayFields),V(l,d,t.row,c,p),l[o].attachFields=n||[],l[o].attachFields.push(Object.keys(r)),l[o].attach=i||[],l[o].attach.push(a?w(u).get(0):s.fixedNode?s.fixedNode():s.node()),l[o].displayFields=e||{},w.extend(l[o].displayFields,r))})}var V=function(n,s,t,o,r){s.rows(t).indexes().each(function(t){var t=s.row(t),e=t.data(),i=r(e);void 0===i&&P.error("Unable to find row identifier",14),n[i]={data:e,fields:o,idSrc:i,node:t.node(),type:"row"}})},H=function(t,e,i,n){function o(t,e){t.name()===e&&(s[t.name()]=t)}var t=t.settings()[0].aoColumns[i],r=void 0!==t.editField?t.editField:t.mData,s={};return w.each(e,function(t,e){if(Array.isArray(r))for(var i=0,n=r;i<n.length;i++){var s=n[i];o(e,s)}else o(e,r)}),w.isEmptyObject(s)&&!n&&P.error("Unable to automatically determine field from source. Please specify the field name.",11),s},v={commit:function(t,e,i,n){var s=this,o=m(this.s.table),r=o.settings()[0].oFeatures.bServerSide,a=n.rowIds;if(!h(o,this)&&"edit"===t&&n.rowIds.length)for(var l=void 0,d=0,u=a.length;d<u;d++){try{l=o.row(c(a[d]))}catch(t){l=o}(l=l.any()?l:o.row(function(n){return function(t,e,i){return n==v.id.call(s,e)}}(a[d]))).any()&&!r&&l.remove()}t=this.s.editOpts.drawType;"none"!==t&&(n=o,r&&a&&a.length&&o.one("draw",function(){for(var t=0,e=a.length;t<e;t++){var i=o.row(c(a[t]));i.any()&&M(i.node())}}),o.draw(t),n.responsive&&n.responsive.recalc(),"function"!=typeof n.searchPanes||r||n.searchPanes.rebuildPane(void 0,!0),void 0===n.searchBuilder||"function"!=typeof n.searchBuilder.rebuild||r||n.searchBuilder.rebuild(n.searchBuilder.getDetails()))},create:function(t,e){var i=m(this.s.table);h(i,this)||(i=i.row.add(e),M(i.node()))},edit:function(t,e,i,n){var s=this,o=m(this.s.table);if(!h(o,this)||"none"===this.s.editOpts.drawType){var r,a=v.id.call(this,i),l=void 0;try{l=o.row(c(a))}catch(t){l=o}(l=l.any()?l:o.row(function(t,e,i){return a==v.id.call(s,e)})).any()?(r=d({},l.data()),r=d(r,i),l.data(r),r=w.inArray(a,n.rowIds),n.rowIds.splice(r,1)):l=o.row.add(i),M(l.node())}},fakeRow:function(t){for(var e=m(this.s.table),i=w('<tr class="dte-inlineAdd">'),n=[],s=[],o={},r=e.table(void 0).body(),a=0,l=e.columns(":visible").count();a<l;a++){var d=e.column(a+":visible").index(),u=w("<td>").appendTo(i),c=H(e,this.s.fields,d,!0),d=e.settings()[0].aoColumns[d].sClass;d&&u.addClass(d),Object.keys(c).length&&(n.push(Object.keys(c)),s.push(u[0]),w.extend(o,c))}function p(){0===e.page.info().recordsDisplay&&w(r).empty(),i["end"===t?"appendTo":"prependTo"](r)}return this.__dtFakeRow=i,p(),e.on("draw.dte-createInline",function(){p()}),{0:{attach:s,attachFields:n,displayFields:o,fields:this.s.fields,type:"row"}}},fakeRowEnd:function(){var t=m(this.s.table);t.off("draw.dte-createInline"),this.__dtFakeRow.remove(),this.__dtFakeRow=null,0===t.page.info().recordsDisplay&&t.draw(!1)},fields:function(t){var e,i,n,s,o,r=u(this.s.idSrc),a=m(this.s.table),l=this.s.fields,d={};return!w.isPlainObject(t)||void 0===t.rows&&void 0===t.columns&&void 0===t.cells?V(d,a,t,l,r):(void 0!==t.rows&&V(d,a,t.rows,l,r),void 0!==t.columns&&(e=d,i=a,n=t.columns,s=l,o=r,i.cells(null,n).indexes().each(function(t){U(e,i,t,s,o)})),void 0!==t.cells&&U(d,a,t.cells,l,r)),d},id:function(t){return u(this.s.idSrc)(t)},individual:function(t,e){var i,n=u(this.s.idSrc),s=m(this.s.table),o=this.s.fields,r={};return e&&(Array.isArray(e)||(e=[e]),i={},w.each(e,function(t,e){i[e]=o[e]})),U(r,s,t,o,n,i),r},prep:function(t,e,i,n,s){var o,r=this;"create"===t&&(s.rowIds=w.map(n.data,function(t){return v.id.call(r,t)})),"edit"===t?(o=n.cancelled||[],s.rowIds=w.map(i.data,function(t,e){return w.isEmptyObject(i.data[e])||-1!==w.inArray(e,o)?void 0:e})):"remove"===t&&(s.cancelled=n.cancelled||[])},refresh:function(){m(this.s.table).ajax.reload(null,!1)},remove:function(t,e,i){var n,s=this,o=m(this.s.table),r=i.cancelled;(0===r.length?o.rows(t):(n=[],o.rows(t).every(function(){var t=v.id.call(s,this.data());-1===w.inArray(t,r)&&n.push(this.index())}),o.rows(n))).remove()}};function q(t){if("keyless"===t)return w(y);var e=w('[data-editor-id="'+t+'"]');if(0===(e=0===e.length?w("string"==typeof t?c(t):t):e).length)throw new Error("Could not find an element with `data-editor-id` or `id` of: "+t);return e}function W(t,e){t=q(t);return w('[data-editor-field="'+e+'"]',t)}function z(n,t,s){w.each(t,function(t,e){var i=e.valFromData(s);void 0!==i&&((e=W(n,e.dataSrc())).filter("[data-editor-value]").length?e.attr("data-editor-value",i):e.each(function(){for(;this.childNodes.length;)this.removeChild(this.firstChild)}).html(i))})}var b={create:function(t,e){if(e){var i=b.id.call(this,e);try{q(i).length&&z(i,t,e)}catch(t){}}},edit:function(t,e,i){z(b.id.call(this,i)||"keyless",e,i)},fields:function(s){var t={};if(Array.isArray(s))for(var e=0,i=s.length;e<i;e++){var n=b.fields.call(this,s[e]);t[s[e]]=n[s[e]]}else{var o={},r=this.s.fields;s=s||"keyless",w.each(r,function(t,e){i=s,n=e.dataSrc();var i,n=(i=W(i,n)).filter("[data-editor-value]").length?i.attr("data-editor-value"):i.html();e.valToData(o,null===n?void 0:n)}),t[s]={data:o,fields:r,idSrc:s,node:y,type:"row"}}return t},id:function(t){return u(this.s.idSrc)(t)},individual:function(i,n){var s,t,o,r;if((i instanceof w||i.nodeName)&&(s=i,n=n||[w(i).attr("data-editor-field")],t=w.fn.addBack?"addBack":"andSelf",i=w(i).parents("[data-editor-id]")[t]().data("editor-id")),i=i||"keyless",(n=n&&!Array.isArray(n)?[n]:n)&&0!==n.length)return t=b.fields.call(this,i),o=this.s.fields,r={},w.each(n,function(t,e){r[e]=o[e]}),w.each(t,function(t,e){e.type="cell",e.attachFields=[n],e.attach=s?w(s):function(t,e){for(var i=w(),n=0,s=e.length;n<s;n++)i=i.add(W(t,e[n]));return i}(i,n).toArray(),e.fields=o,e.displayFields=r}),t;throw new Error("Cannot automatically determine field name from data source")},initField:function(t){var e=w('[data-editor-label="'+(t.data||t.name)+'"]');!t.label&&e.length&&(t.label=e.html())},remove:function(t,e){"keyless"!==t&&q(t).remove()}},G={actions:{create:"DTE_Action_Create",edit:"DTE_Action_Edit",remove:"DTE_Action_Remove"},body:{content:"DTE_Body_Content",wrapper:"DTE_Body"},bubble:{bg:"DTE_Bubble_Background",close:"DTE_Bubble_Close",liner:"DTE_Bubble_Liner",pointer:"DTE_Bubble_Triangle",table:"DTE_Bubble_Table",wrapper:"DTE DTE_Bubble"},field:{disabled:"disabled",error:"DTE_Field_StateError",input:"DTE_Field_Input",inputControl:"DTE_Field_InputControl",label:"DTE_Label","msg-error":"DTE_Field_Error","msg-info":"DTE_Field_Info","msg-label":"DTE_Label_Info","msg-message":"DTE_Field_Message",multiInfo:"multi-info",multiNoEdit:"multi-noEdit",multiRestore:"multi-restore",multiValue:"multi-value",namePrefix:"DTE_Field_Name_",processing:"DTE_Processing_Indicator",typePrefix:"DTE_Field_Type_",wrapper:"DTE_Field"},footer:{content:"DTE_Footer_Content",wrapper:"DTE_Footer"},form:{button:"btn",buttonSubmit:"btn",buttonInternal:"btn",buttons:"DTE_Form_Buttons",content:"DTE_Form_Content",error:"DTE_Form_Error",info:"DTE_Form_Info",tag:"",wrapper:"DTE_Form"},header:{content:"DTE_Header_Content",title:{tag:null,class:""},wrapper:"DTE_Header"},inline:{buttons:"DTE_Inline_Buttons",liner:"DTE_Inline_Field",wrapper:"DTE DTE_Inline"},processing:{active:"processing",indicator:"DTE_Processing_Indicator"},wrapper:"DTE"},g=!1,J=1,E={background:w('<div class="DTED_Envelope_Background"><div></div></div>')[0],close:w('<div class="DTED_Envelope_Close"></div>')[0],content:null,wrapper:w('<div class="DTED DTED_Envelope_Wrapper"><div class="DTED_Envelope_Shadow"></div><div class="DTED_Envelope_Container"></div></div>')[0]};function X(t){var e=w("div.DTE_Header",E.wrapper).outerHeight(),i=w("div.DTE_Footer",E.wrapper).outerHeight(),e=w(p).height()-2*T.conf.windowPadding-e-i;return w("div.DTE_Body_Content",E.wrapper).css("maxHeight",e),w(t.dom.wrapper).outerHeight()}function $(t,e){e=e||function(){},g&&(w(E.content).animate({top:-(E.content.offsetHeight+50)},600,function(){w([E.wrapper,E.background]).fadeOut("normal",function(){w(this).detach(),e()})}),g=!1)}function Q(e,t){var i,n,s,o,r;t=t||function(){},w("body").append(E.background).append(E.wrapper),E.content.style.height="auto",g||((i=E.wrapper.style).opacity="0",i.display="block",n=X(e),s=e,o=T.conf.attach,r=new w.fn.dataTable.Api(s.s.table),r=(o="head"===o||"create"===s.s.action?r.table(void 0).header():r.row(s.s.modifier).node()).offsetWidth,i.display="none",i.opacity="1",E.wrapper.style.width=r+"px",E.wrapper.style.marginLeft=-r/2+"px",E.wrapper.style.top=w(o).offset().top+o.offsetHeight+"px",E.content.style.top=-1*n-20+"px",E.background.style.opacity="0",E.background.style.display="block",w(E.background).animate({opacity:J},"normal"),w(E.wrapper).fadeIn(),w(E.content).animate({top:0},600,t)),w(E.close).attr("title",e.i18n.close).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){e.close()}),w(E.background).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){e.background()}),w("div.DTED_Lightbox_Content_Wrapper",E.wrapper).off("click.DTED_Envelope").on("click.DTED_Envelope",function(t){w(t.target).hasClass("DTED_Envelope_Content_Wrapper")&&e.background()}),w(p).off("resize.DTED_Envelope").on("resize.DTED_Envelope",function(){X(e)}),g=!0}var T={close:function(t,e){$(0,e)},conf:{attach:"row",windowPadding:50},destroy:function(t){$()},init:function(t){return E.content=w("div.DTED_Envelope_Container",E.wrapper)[0],J=w(E.background).css("opacity"),T},node:function(t){return E.wrapper[0]},open:function(t,e,i){w(E.content).children().detach(),E.content.appendChild(e),E.content.appendChild(E.close),Q(t,i)}};function Z(){return void 0!==p.orientation&&p.outerWidth<=576}var o=!1,K=!1,Y=0,D={background:w('<div class="DTED_Lightbox_Background"><div></div></div>'),close:w('<div class="DTED_Lightbox_Close"></div>'),content:null,wrapper:w('<div class="DTED DTED_Lightbox_Wrapper"><div class="DTED_Lightbox_Container"><div class="DTED_Lightbox_Content_Wrapper"><div class="DTED_Lightbox_Content"></div></div></div></div>')};function tt(){var t=w("div.DTE_Header",D.wrapper).outerHeight()+w("div.DTE_Footer",D.wrapper).outerHeight();Z()?w("div.DTE_Body_Content",D.wrapper).css("maxHeight","calc(100vh - "+t+"px)"):(t=w(p).height()-2*x.conf.windowPadding-t,w("div.DTE_Body_Content",D.wrapper).css("maxHeight",t))}function et(t,e){e=e||function(){},w("body").scrollTop(Y),t._animate(D.wrapper,{opacity:0,top:x.conf.offsetAni},function(){w(this).detach(),e()}),t._animate(D.background,{opacity:0},function(){w(this).detach()}),o=!1,w(p).off("resize.DTED_Lightbox")}var x={close:function(t,e){et(t,e)},conf:{offsetAni:25,windowPadding:25},destroy:function(t){o&&et(t)},init:function(t){return K||(D.content=w("div.DTED_Lightbox_Content",D.wrapper),D.wrapper.css("opacity",0),D.background.css("opacity",0),K=!0),x},node:function(t){return D.wrapper[0]},open:function(t,e,i){var n,s=D.content;s.children().detach(),s.append(e).append(D.close),n=t,s=i,Z()&&w("body").addClass("DTED_Lightbox_Mobile"),w("body").append(D.background).append(D.wrapper),tt(),o||(o=!0,D.content.css("height","auto"),D.wrapper.css({top:-x.conf.offsetAni}),n._animate(D.wrapper,{opacity:1,top:0},s),n._animate(D.background,{opacity:1}),w(p).on("resize.DTED_Lightbox",function(){tt()}),Y=w("body").scrollTop()),D.close.attr("title",n.i18n.close).off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){n.close()}),D.background.off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){t.stopImmediatePropagation(),n.background()}),w("div.DTED_Lightbox_Content_Wrapper",D.wrapper).off("click.DTED_Lightbox").on("click.DTED_Lightbox",function(t){w(t.target).hasClass("DTED_Lightbox_Content_Wrapper")&&(t.stopImmediatePropagation(),n.background())})}},it=w.fn.dataTable;function nt(t,e,i){if(void 0===i&&(i=!0),Array.isArray(t)){void 0!==e&&t.reverse();for(var n=0,s=t;n<s.length;n++){var o=s[n];this.add(o,e,!1)}this._displayReorder(this.order())}else{var r=t.name;if(void 0===r)throw new Error("Error adding field. The field requires a `name` option");if(this.s.fields[r])throw new Error("Error adding field '"+r+"'. A field already exists with this name");this._dataSource("initField",t);var a=new P.Field(t,this.classes.field,this);this.s.mode&&(t=this.s.editFields,a.multiReset(),w.each(t,function(t,e){var i;e.data&&(i=a.valFromData(e.data)),a.multiSet(t,void 0!==i?i:a.def())})),this.s.fields[r]=a,void 0===e?this.s.order.push(r):null===e?this.s.order.unshift(r):(t=w.inArray(e,this.s.order),this.s.order.splice(t+1,0,r)),!1!==i&&this._displayReorder(this.order())}return this}function st(t){return t?(this.s.ajax=t,this):this.s.ajax}function ot(){var t=this.s.editOpts.onBackground;return"function"==typeof t?t(this):"blur"===t?this.blur():"close"===t?this.close():"submit"===t&&this.submit(),this}function rt(){return this._blur(),this}function at(t,e,a,l){var d,u=this,i=(void 0===a&&(a=!0),this);return this._tidy(function(){i.bubble(t,e,l)})||(w.isPlainObject(e)?(l=e,a=!(e=void 0)):"boolean"==typeof e&&(a=e,l=e=void 0),w.isPlainObject(a)&&(l=a,a=!0),void 0===a&&(a=!0),l=w.extend({},this.s.formOptions.bubble,l),d=this._dataSource("individual",t,e),this._edit(t,d,"bubble",l,function(){var e=u._formOptions(l);if(!u._preopen("bubble"))return u;w(p).on("resize."+e+" scroll."+e,function(){u.bubblePosition()});var t=[],t=(u.s.bubbleNodes=t.concat.apply(t,f(d,"attach")),u.classes.bubble),i=w('<div class="'+t.bg+'"><div></div></div>'),n=w('<div class="'+t.wrapper+'"><div class="'+t.liner+'"><div class="'+t.table+'"><div class="'+t.close+'" title="'+u.i18n.close+'"></div><div class="DTE_Processing_Indicator"><span></div></div></div><div class="'+t.pointer+'"></div></div>'),t=(a&&(n.appendTo("body"),i.appendTo("body")),n.children().eq(0)),s=t.children(),o=s.children(),r=(t.append(u.dom.formError),s.prepend(u.dom.form),l.message&&t.prepend(u.dom.formInfo),l.title&&t.prepend(u.dom.header),l.buttons&&s.append(u.dom.buttons),w().add(n).add(i));u._closeReg(function(t){u._animate(r,{opacity:0},function(){this===n[0]&&(r.detach(),w(p).off("resize."+e+" scroll."+e),u._clearDynamicInfo(),u._event("closed",["bubble"]))})}),i.on("click",function(){u.blur()}),o.on("click",function(){u._close()}),u.bubblePosition(),u._postopen("bubble",!1);u._animate(r,{opacity:1},function(){this===n[0]&&(u._focus(u.s.includeFields,l.focus),u._event("opened",["bubble",u.s.action]))})})),this}function lt(t){return t?(this.s.bubbleLocation=t,this.bubblePosition(),this):this.s.bubbleLocation}function dt(){var t=w("div.DTE_Bubble"),e=w("div.DTE_Bubble_Liner"),i=this.s.bubbleNodes,n={bottom:0,left:0,right:0,top:0},i=(w.each(i,function(t,e){var i=w(e).offset();e=w(e).get(0),n.top+=i.top,n.left+=i.left,n.right+=i.left+e.offsetWidth,n.bottom+=i.top+e.offsetHeight}),n.top/=i.length,n.left/=i.length,n.right/=i.length,n.bottom/=i.length,n.top),s=(n.left+n.right)/2,o=e.outerWidth(),r=e.outerHeight(),a=s-o/2,o=a+o,l=w(p).width(),d=w(p).scrollTop(),u=this.s.bubbleLocation,c="auto"!==u?u:this.s.bubbleBottom?"bottom":"top",s=(t.css({left:s,top:"bottom"===c?n.bottom:i}).toggleClass("below","bottom"===c),t.position());return"auto"===u&&(e.length&&s.top+r>d+p.innerHeight?(t.css("top",i).removeClass("below"),this.s.bubbleBottom=!1):e.length&&s.top-r<d&&(t.css("top",n.bottom).addClass("below"),this.s.bubbleBottom=!0)),l<o+15?e.css("left",a<15?-(a-15):-(15+(o-l))):e.css("left",a<15?-(a-15):0),this}function ut(t){var o=this;return"_basic"===t?t=[{action:function(){this.submit()},text:this.i18n[this.s.action].submit,className:this.classes.form.buttonSubmit}]:Array.isArray(t)||(t=[t]),w(this.dom.buttons).empty(),w.each(t,function(t,e){var i=(e="string"==typeof e?{action:function(){this.submit()},text:e,className:o.classes.form.buttonSubmit}:e).text||e.label,n=e.action||e.fn,s=e.attr||{};w("<button></button>",{class:o.classes.form.button+(e.className?" "+e.className:"")}).html("function"==typeof i?i(o):i||"").attr("tabindex",void 0!==e.tabIndex?e.tabIndex:0).attr(s).on("keyup",function(t){13===t.which&&n&&n.call(o)}).on("keypress",function(t){13===t.which&&t.preventDefault()}).on("click",function(t){t.preventDefault(),n&&n.call(o,t)}).appendTo(o.dom.buttons)}),this}function ct(t){var i=this,e=this.s.fields;return"string"==typeof t?(i.field(t).destroy(),delete e[t],e=w.inArray(t,this.s.order),this.s.order.splice(e,1),-1!==(e=w.inArray(t,this.s.includeFields))&&this.s.includeFields.splice(e,1)):w.each(this._fieldNames(t),function(t,e){i.clear(e)}),this}function pt(){return this._close(!1),this}function ft(t,e,i,n){var s=this,o=this,r=this.s.fields,a=1;if(!this._tidy(function(){o.create(t,e,i,n)})){"number"==typeof t&&(a=t,t=e,e=i),this.s.editFields={};for(var l=0;l<a;l++)this.s.editFields[l]={fields:this.s.fields};var d=this._crudArgs(t,e,i,n);this.s.mode="main",this.s.action="create",this.s.modifier=null,this.dom.form.style.display="block",this._actionClass(),this._displayReorder(this.fields()),w.each(r,function(t,e){var i=e.def();e.multiReset();for(var n=0;n<a;n++)e.multiSet(n,i);e.set(i)}),this._event("initCreate",null,function(){s._assembleMain(),s._formOptions(d.opts),d.maybeOpen()})}return this}function ht(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;e++)this.undependent(t[e]);else w(this.field(t).node()).off(".edep");return this}function mt(t,n,e){var s=this;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)this.dependent(t[i],n,e);else{var r=this,a=this.field(t),l={dataType:"json",type:"POST"},d=w.extend({},{data:null,event:"change",postUpdate:null,preUpdate:null},e),u=function(n){d.preUpdate&&d.preUpdate(n),w.each({errors:"error",labels:"label",messages:"message",options:"update",values:"val"},function(t,i){n[t]&&w.each(n[t],function(t,e){r.field(t)[i](e)})}),w.each(["hide","show","enable","disable"],function(t,e){n[e]&&r[e](n[e],n.animate)}),d.postUpdate&&d.postUpdate(n),a.processing(!1)};w(a.node()).on(d.event+".edep",function(t){var e,i;0!==w(a.node()).find(t.target).length&&(a.processing(!0),(e={}).rows=s.s.editFields?f(s.s.editFields,"data"):null,e.row=e.rows?e.rows[0]:null,e.values=s.val(),d.data&&(i=d.data(e))&&(e=i),"function"==typeof n?(i=n.call(s,a.val(),e,u,t))&&("object"==typeof i&&"function"==typeof i.then?i.then(function(t){t&&u(t)}):u(i)):(w.isPlainObject(n)?w.extend(l,n):l.url=n,w.ajax(w.extend(l,{data:e,success:u}))))})}return this}function vt(){this.s.displayed&&this.close(),this.clear(),this.s.template&&w("body").append(this.s.template);var t=this.s.displayController;t.destroy&&t.destroy(this),w(y).off(".dte"+this.s.unique),w(y).trigger("destroyEditor",[this]),this.dom=null,this.s=null}function bt(t){var i=this;return w.each(this._fieldNames(t),function(t,e){i.field(e).disable()}),this}function _t(t){return void 0===t?this.s.displayed:this[t?"open":"close"]()}function yt(){return w.map(this.s.fields,function(t,e){return t.displayed()?e:null})}function gt(){return this.s.displayController.node(this)}function wt(t,e,i,n,s){var o,r=this,a=this;return this._tidy(function(){a.edit(t,e,i,n,s)})||(o=this._crudArgs(e,i,n,s),this._edit(t,this._dataSource("fields",t),"main",o.opts,function(){r._assembleMain(),r._formOptions(o.opts),o.maybeOpen()})),this}function Et(t){var i=this;return w.each(this._fieldNames(t),function(t,e){i.field(e).enable()}),this}function Tt(t,e){var i=w(this.dom.wrapper);return void 0===e?(this._message(this.dom.formError,t,!0,function(){i.toggleClass("inFormError",void 0!==t&&""!==t)}),t&&!w(this.dom.formError).is(":visible")&&alert(t.replace(/<br>/g,"\n")),this.s.globalError=t):this.field(t).error(e),this}function Dt(t){var e=this.s.fields;if(e[t])return e[t];throw new Error("Unknown field name - "+t)}function xt(){return w.map(this.s.fields,function(t,e){return e})}function Ct(t,e){var i=this.files(t);if(i[e])return i[e];throw new Error("Unknown file id "+e+" in table "+t)}function kt(t){if(!t)return P.files;var e=P.files[t];if(e)return e;throw new Error("Unknown file table name: "+t)}function Ft(t){var i,n=this;return t=t||this.fields(),Array.isArray(t)?(i={},w.each(t,function(t,e){i[e]=n.field(e).get()}),i):this.field(t).get()}function Ot(t,i){var n=this;return w.each(this._fieldNames(t),function(t,e){n.field(e).hide(i)}),this}function At(i){return void 0===i&&(i=!1),w.map(this.s.editFields,function(t,e){return!0===i?"#"+e:e})}function St(t){if(this.s.globalError)return!0;for(var e=this._fieldNames(t),i=0,n=e.length;i<n;i++)if(this.field(e[i]).inError())return!0;return!1}function It(t,e,i){var n=this,s=this,o=(w.isPlainObject(e)&&(i=e,e=void 0),i=w.extend({},this.s.formOptions.inline,i),this._dataSource("individual",t,e)),r=Object.keys(o);if(1<r.length)throw new Error("Cannot edit more than one row inline at a time");for(var a=[],l=0,d=o[r[0]].attach;l<d.length;l++){var u=d[l];a.push(u)}return w("div.DTE_Field",a).length||this._tidy(function(){s.inline(t,e,i)})||this._edit(t,o,"inline",i,function(){n._inline(o,i)}),this}function jt(t,e){var i=this;return w.isPlainObject(t)&&(e=t,t=null),this._tidy(function(){i.inlineCreate(t,e)})||(w.each(this.s.fields,function(t,e){e.multiReset(),e.multiSet(0,e.def()),e.set(e.def())}),this.s.mode="main",this.s.action="create",this.s.modifier=null,this.s.editFields=this._dataSource("fakeRow",t),e=w.extend({},this.s.formOptions.inline,e),this._actionClass(),this._inline(this.s.editFields,e,function(){i._dataSource("fakeRowEnd")}),this._event("initCreate",null)),this}function Pt(t,e){return void 0===e?this._message(this.dom.formInfo,t):this.field(t).message(e),this}function Nt(t){if(!t)return this.s.action;if(!this.s.action)throw new Error("Not currently in an editing mode");if("create"===this.s.action&&"create"!==t)throw new Error("Changing from create mode is not supported");return this.s.action=t,this}function Rt(){return this.s.modifier}function Bt(t){var i,n=this;return void 0===t&&(t=this.fields()),Array.isArray(t)?(i={},w.each(t,function(t,e){i[e]=n.field(e).multiGet()}),i):this.field(t).multiGet()}function Lt(t,e){var i=this;return w.isPlainObject(t)&&void 0===e?w.each(t,function(t,e){i.field(t).multiSet(e)}):this.field(t).multiSet(e),this}function Mt(t){var e=this;return t=t||this.order(),Array.isArray(t)?w.map(t,function(t){return e.field(t).node()}):this.field(t).node()}function Ut(t,e){return w(this).off(this._eventName(t),e),this}function Vt(t,e){return w(this).on(this._eventName(t),e),this}function Ht(t,e){return w(this).one(this._eventName(t),e),this}function qt(){var e=this;return this._displayReorder(),this._closeReg(function(){e._nestedClose(function(){e._clearDynamicInfo(),e._event("closed",["main"])})}),this._preopen("main")&&(this._nestedOpen(function(){e._focus(w.map(e.s.order,function(t){return e.s.fields[t]}),e.s.editOpts.focus),e._event("opened",["main",e.s.action])},this.s.editOpts.nest),this._postopen("main",!1)),this}function Wt(t){if(!t)return this.s.order;if(arguments.length&&!Array.isArray(t)&&(t=Array.prototype.slice.call(arguments)),this.s.order.slice().sort().join("-")!==t.slice().sort().join("-"))throw new Error("All fields, and no additional fields, must be provided for ordering.");return w.extend(this.s.order,t),this._displayReorder(),this}function zt(t,e,i,n,s){var o,r,a=this,l=this;return this._tidy(function(){l.remove(t,e,i,n,s)})||(void 0===(t=t||this.s.table?t:"keyless").length&&(t=[t]),o=this._crudArgs(e,i,n,s),r=this._dataSource("fields",t),this.s.action="remove",this.s.modifier=t,this.s.editFields=r,this.dom.form.style.display="none",this._actionClass(),this._event("initRemove",[f(r,"node"),f(r,"data"),t],function(){a._event("initMultiRemove",[r,t],function(){a._assembleMain(),a._formOptions(o.opts),o.maybeOpen();var t=a.s.editOpts;null!==t.focus&&setTimeout(function(){a.dom&&w("button",a.dom.buttons).eq(t.focus).focus()},100)})})),this}function Gt(t,e){var i,n=this;return w.isPlainObject(t)||((i={})[t]=e,t=i),w.each(t,function(t,e){n.field(t).set(e)}),this}function Jt(t,i){var n=this;return w.each(this._fieldNames(t),function(t,e){n.field(e).show(i)}),this}function Xt(e,i,n,s){var o,t,r=this,a=this.s.fields,l=[],d=0,u=!1;return!this.s.processing&&this.s.action&&(this._processing(!0),o=function(){l.length!==d||u||r._event("initSubmit",[r.s.action],function(t){!1===t?r._processing(!1):(u=!0,r._submit(e,i,n,s))})},t=y.activeElement,0!==w(t).closest("div.DTE_Field").length&&t.blur(),this.error(),w.each(a,function(t,e){e.inError()&&l.push(t)}),w.each(l,function(t,e){a[e].error("",function(){d++,o()})}),o()),this}function $t(t){return void 0===t?this.s.table:(this.s.table=t,this)}function Qt(t){return void 0===t?this.s.template:(this.s.template=null===t?null:w(t),this)}function Zt(t){var e=w(this.dom.header).children("div."+this.classes.header.content),i=this.classes.header.title;if(void 0===t)return e.data("title");"function"==typeof t&&(t=t(this,new it.Api(this.s.table)));i=i.tag?w("<"+i.tag+"></"+i.tag).addClass(i.class).html(t):t;return e.html(i).data("title",t),this}function Kt(t,e){return void 0!==e||w.isPlainObject(t)?this.set(t,e):this.get(t)}function Yt(t,e,i){e=e?t+" For more information, please refer to https://datatables.net/tn/"+e:t;if(i=void 0===i?!0:i)throw e;console.warn(e)}function te(t,e,i){var n,s,o;if(e=w.extend({label:"label",value:"value"},e),Array.isArray(t))for(n=0,s=t.length;n<s;n++)o=t[n],w.isPlainObject(o)?i(void 0===o[e.value]?o[e.label]:o[e.value],o[e.label],n,o.attr):i(o,o,n);else n=0,w.each(t,function(t,e){i(e,t,n),n++})}function ee(o,r,a,l,d){var u=new FileReader,c=0,p=[],f=r.errors&&r.errors._?r.errors._:"A server error occurred while uploading the file";o.error(r.name,""),"function"==typeof r.ajax?r.ajax(a,function(t){d.call(o,t)}):(l(r,r.fileReadText||"<i>Uploading file</i>"),u.onload=function(t){var e,i=new FormData;if(i.append("action","upload"),i.append("uploadField",r.name),i.append("upload",a[c]),r.ajaxData&&r.ajaxData(i,a[c],c),r.ajax?e=r.ajax:w.isPlainObject(o.s.ajax)?e=o.s.ajax.upload||o.s.ajax:"string"==typeof o.s.ajax&&(e=o.s.ajax),!e)throw new Error("No Ajax option specified for upload plug-in");if("function"==typeof(e="string"==typeof e?{url:e}:e).data){var n={},s=e.data(n);w.each(n=void 0!==s&&"string"!=typeof s?s:n,function(t,e){i.append(t,e)})}else if(w.isPlainObject(e.data))throw new Error("Upload feature cannot use `ajax.data` with an object. Please use it as a function instead.");o._event("preUpload",[r.name,a[c],i],function(t){var s;!1===t?c<a.length-1?(c++,u.readAsDataURL(a[c])):d.call(o,p):(s=!1,o.on("preSubmit.DTE_Upload",function(){return!(s=!0)}),w.ajax(w.extend({},e,{contentType:!1,data:i,dataType:"json",error:function(t){var e=r.errors;o.off("preSubmit.DTE_Upload"),o.error(r.name,e&&e[t.status]?e[t.status]:f),o._event("uploadXhrError",[r.name,t]),l(r)},processData:!1,success:function(t){if(o.off("preSubmit.DTE_Upload"),o._event("uploadXhrSuccess",[r.name,t]),t.fieldErrors&&t.fieldErrors.length){for(var e=t.fieldErrors,i=0,n=e.length;i<n;i++)o.error(e[i].name,e[i].status);d.call(o,p,!0)}else t.error?(o.error(t.error),d.call(o,p,!0)):t.upload&&t.upload.id?(t.files&&w.each(t.files,function(t,e){P.files[t]||(P.files[t]={}),w.extend(P.files[t],e)}),p.push(t.upload.id),c<a.length-1?(c++,u.readAsDataURL(a[c])):(d.call(o,p),s&&o.submit())):(o.error(r.name,f),d.call(o,p,!0));l(r)},type:"post",xhr:function(){var t=w.ajaxSettings.xhr();return t.upload&&(t.upload.onprogress=function(t){t.lengthComputable&&(t=(t.loaded/t.total*100).toFixed(0)+"%",l(r,1===a.length?t:c+":"+a.length+" "+t))},t.upload.onloadend=function(){l(r,r.processingText||"Processing")}),t}})))})},a=w.map(a,function(t){return t}),void 0!==r._limitLeft&&a.splice(r._limitLeft,a.length),u.readAsDataURL(a[0]))}function ie(t,e){var i=!1;return t&&t.document&&(y=(p=t).document),e&&e.fn&&e.fn.jquery&&(w=e,i=!0),i}var ne=w.fn.dataTable,se=0;function oe(){var t=this.classes.actions,e=this.s.action,i=w(this.dom.wrapper);i.removeClass([t.create,t.edit,t.remove].join(" ")),"create"===e?i.addClass(t.create):"edit"===e?i.addClass(t.edit):"remove"===e&&i.addClass(t.remove)}function re(i,n,s,t){var o,e,r=this.s.action,a={complete:[function(t,e){var i=null;if(204===t.status||"null"===t.responseText)i={};else try{i=t.responseJSON||JSON.parse(t.responseText)}catch(t){}w.isPlainObject(i)||Array.isArray(i)?n(i,400<=t.status,t):s(t,e,o)}],data:null,dataType:"json",error:[function(t,e,i){o=i}],success:[],type:"POST"},l=this.s.ajax,d="edit"===r||"remove"===r?f(this.s.editFields,"idSrc").join(","):null;"function"==typeof(l=w.isPlainObject(l)&&l[r]?l[r]:l)?l.call(this,null,null,i,n,s):("string"==typeof l?-1!==l.indexOf(" ")?(e=l.split(" "),a.type=e[0],a.url=e[1]):a.url=l:((e=w.extend({},l||{})).complete&&(a.complete.unshift(e.complete),delete e.complete),e.error&&(a.error.unshift(e.error),delete e.error),a=w.extend({},a,e)),a.replacements&&w.each(a.replacements,function(t,e){a.url=a.url.replace("{"+t+"}",e.call(this,t,d,r,i))}),a.url=a.url.replace(/_id_/,d).replace(/{id}/,d),a.data&&(e=(l="function"==typeof a.data)?a.data(i):a.data,i=l&&e?e:w.extend(!0,i,e)),a.data=i,"DELETE"!==a.type||void 0!==a.deleteBody&&!0!==a.deleteBody||(l=w.param(a.data),a.url+=-1===a.url.indexOf("?")?"?"+l:"&"+l,delete a.data),w.ajax(a))}function ae(t,e,i,n){w.fn.animate?t.stop().animate(e,i,n):(t.css(e),e=t.length&&1<t.length?t[0]:t,"function"==typeof i?i.call(e):n&&n.call(e))}function le(){var t=this.dom;w(t.wrapper).prepend(t.header),w(t.footer).append(t.formError).append(t.buttons),w(t.bodyContent).append(t.formInfo).append(t.form)}function de(){var t=this.s.editOpts.onBlur;!1!==this._event("preBlur")&&("function"==typeof t?t(this):"submit"===t?this.submit():"close"===t&&this._close())}function ue(i){var t,e;void 0===i&&(i=!1),this.s&&(t=this.classes.field.error,e=this.s.fields,w("div."+t,this.dom.wrapper).removeClass(t),w.each(e,function(t,e){e.error(""),i||e.message("")}),this.error(""),i||this.message(""),this.s.setFocus=null,this.s.bubbleBottom=!1)}function ce(t,e){var i;!1!==this._event("preClose")&&(this.s.closeCb&&(i=this.s.closeCb(t,e),this.s.closeCb=null),this.s.closeIcb&&(this.s.closeIcb(),this.s.closeIcb=null),w("body").off("focus.editor-focus"),this.s.displayed=!1,this._event("close"),i)&&this._event("closed",[i])}function pe(t){this.s.closeCb=t}function fe(t,e,i,n){var s,o,r,a=this,t=w.isPlainObject(t)?t:"boolean"==typeof t?(r=t,e):(s=t,o=e,r=i,n);return void 0===r&&(r=!0),s&&a.title(s),o&&a.buttons(o),{maybeOpen:function(){r&&a.open()},opts:w.extend({},this.s.formOptions.main,t)}}function he(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t=(this.s.table?P.dataSources.dataTable:P.dataSources.html)[t];if(t)return t.apply(this,e)}function me(i){var n=this,s=w(this.dom.formContent),o=this.s.fields,t=this.s.order,r=this.s.template,a=this.s.mode||"main";i?this.s.includeFields=i:i=this.s.includeFields,s.children().detach(),w.each(t,function(t,e){-1!==n._weakInArray(e,i)&&(r&&"main"===a?(r.find('editor-field[name="'+e+'"]').after(o[e].node()),r.find('[data-editor-template="'+e+'"]')):s).append(o[e].node())}),r&&"main"===a&&r.appendTo(s),this._event("displayOrder",[this.s.displayed,this.s.action,s])}function ve(t,e,i,r,n){for(var a,s=this,o=this.s.fields,l=[],d={},u=(this.s.editFields=e,this.s.editData=d,this.s.modifier=t,this.s.action="edit",this.dom.form.style.display="block",this.s.mode=i,this._actionClass(),w.each(o,function(s,o){o.multiReset(),a=!1,d[s]={},w.each(e,function(t,e){var i,n;e.fields[s]&&(i=o.valFromData(e.data),n=o.nullDefault(),d[s][t]=null===i?"":Array.isArray(i)?i.slice():i,r&&"row"!==r.scope?e.displayFields&&!e.displayFields[s]||(o.multiSet(t,void 0===i||n&&null===i?o.def():i,!1),a=!0):(o.multiSet(t,void 0===i||n&&null===i?o.def():i,!1),e.displayFields&&!e.displayFields[s]||(a=!0)))}),o._multiValueCheck(),0!==o.multiIds().length&&a&&l.push(s)}),this.order().slice()),c=u.length-1;0<=c;c--)-1===w.inArray(u[c].toString(),l)&&u.splice(c,1);this._displayReorder(u),this._event("initEdit",[f(e,"node")[0],f(e,"data")[0],t,i],function(){s._event("initMultiEdit",[e,t,i],function(){n()})})}function be(t,e,i){var n;if(void 0===e&&(e=[]),void 0===i&&(i=void 0),!Array.isArray(t))return n=w.Event(t),w(this).triggerHandler(n,e),n=n.result,0===t.indexOf("pre")&&!1===n&&w(this).triggerHandler(w.Event(t+"Cancelled"),e),i&&(n&&"object"==typeof n&&n.then?n.then(i):i(n)),n;for(var s=0,o=t.length;s<o;s++)this._event(t[s],e)}function _e(t){for(var e=t.split(" "),i=0,n=e.length;i<n;i++){var s,o=(s=e[i]).match(/^on([A-Z])/);o&&(s=o[1].toLowerCase()+s.substring(3)),e[i]=s}return e.join(" ")}function ye(i){var n=null;return w.each(this.s.fields,function(t,e){w(e.node()).find(i).length&&(n=e)}),n}function ge(t){return void 0===t?this.fields():Array.isArray(t)?t:[t]}function we(t,e){var i,n=this;"remove"!==this.s.action&&(t=w.map(t,function(t){return"string"==typeof t?n.s.fields[t]:t}),"number"==typeof e?i=t[e]:e?i=0===e.indexOf("jq:")?w("div.DTE "+e.replace(/^jq:/,"")):this.s.fields[e]:y.activeElement.blur(),this.s.setFocus=i)&&i.focus()}function Ee(n){var s=this,o=this,t=se++,e=".dteInline"+t;return this.s.editOpts=n,this.s.editCount=t,"string"!=typeof n.title&&"function"!=typeof n.title||(this.title(n.title),n.title=!0),"string"!=typeof n.message&&"function"!=typeof n.message||(this.message(n.message),n.message=!0),"boolean"!=typeof n.buttons&&(this.buttons(n.buttons),n.buttons=!0),w(y).on("keydown"+e,function(t){var e,i;13===t.which&&s.s.displayed&&(e=w(y.activeElement))&&(i=s._fieldFromNode(e))&&"function"==typeof i.canReturnSubmit&&i.canReturnSubmit(e)&&t.preventDefault()}),w(y).on("keyup"+e,function(t){var e,i=w(y.activeElement);13===t.which&&s.s.displayed?(e=s._fieldFromNode(i))&&"function"==typeof e.canReturnSubmit&&e.canReturnSubmit(i)&&("submit"===n.onReturn?(t.preventDefault(),s.submit()):"function"==typeof n.onReturn&&(t.preventDefault(),n.onReturn(s,t))):27===t.which?(t.preventDefault(),"function"==typeof n.onEsc?n.onEsc(o,t):"blur"===n.onEsc?o.blur():"close"===n.onEsc?o.close():"submit"===n.onEsc&&o.submit()):i.parents(".DTE_Form_Buttons").length&&(37===t.which?i.prev("button").trigger("focus"):39===t.which&&i.next("button").trigger("focus"))}),this.s.closeIcb=function(){w(y).off("keydown"+e),w(y).off("keyup"+e)},e}function Te(t,e,i){for(var n,a=this,s=(void 0===i&&(i=null),!1),o=this.classes.inline,r=t[Object.keys(t)[0]],l=[],d=0;d<r.attach.length;d++){var u=r.attachFields[d][0];l.push({field:this.s.fields[u],name:u,node:w(r.attach[d])})}var c=this._formOptions(e);if(!this._preopen("inline"))return this;for(var p=0,f=l;p<f.length;p++){var h=f[p],m=h.node,v=(h.children=m.contents().detach(),-1!==navigator.userAgent.indexOf("Edge/")?'style="width:'+m.width()+'px"':""),v=(m.append(w('<div class="'+o.wrapper+'"><div class="'+o.liner+'" '+v+'><div class="DTE_Processing_Indicator"><span></span></div></div><div class="'+o.buttons+'"></div></div>')),m.find("div."+o.liner.replace(/ /g,".")).append(h.field.node()).append(this.dom.formError),w(h.field.node()).closest("tr"));v.length&&(n=v),e.buttons&&m.find("div."+o.buttons.replace(/ /g,".")).append(this.dom.buttons)}var b=this._inputTrigger("submit",e,n),_=this._inputTrigger("cancel",e,n);this._closeReg(function(t,e){return s=!0,w(y).off("click"+c),t&&"edit"===e||l.forEach(function(t){t.node.contents().detach(),t.node.append(t.children)}),b(),_(),a._clearDynamicInfo(),i&&i(),"inline"}),setTimeout(function(){var o,r;s||(o=w.fn.addBack?"addBack":"andSelf",w(y).on("mousedown"+c,function(t){r=t.target}).on("keydown"+c,function(t){r=t.target}).on("click"+c,function(t){for(var e=!1,i=0,n=l;i<n.length;i++){var s=n[i];!s.field._typeFn("owns",r)&&-1===w.inArray(s.node[0],w(r).parents()[o]())||(e=!0)}e||a.blur()}))},0),this._focus(w.map(l,function(t){return t.field}),e.focus),this._postopen("inline",!0)}function De(e,t,i){var n,s=this,o=t[e+"Trigger"],t=t[e+"Html"],r="click.dte-"+e,i=w(i).closest("tr");if(void 0===o)return function(){};"number"==typeof o&&(n=i.children(),o=o<0?n[n.length+o]:n[o]);var a=w(o,i).length?Array.prototype.slice.call(w(o,i)[0].childNodes):[],l=(w(a).detach(),w(o,i).on(r,function(t){t.stopImmediatePropagation(),"cancel"===e?s.close():s.submit()}).append(t));return function(){l.off(r).empty().append(a)}}function xe(n){var s=this;n&&n.options&&w.each(this.s.fields,function(t,e){var i;void 0===n.options[t]||(i=s.field(t)).dt&&i.dt().ajax.url()||i&&i.update&&i.update(n.options[t])})}function Ce(t,e,i,n){var s=!!w.fn.animate;void 0===i&&(i=!1),n=n||function(){},"function"==typeof e&&(e=e(this,new ne.Api(this.s.table))),t=w(t),s&&t.stop(),e?(n(),this.s.displayed&&s?t.html(e).fadeIn():t.html(e).css("display","block"),i&&t.attr("title",e)):(this.s.displayed&&s?t.fadeOut(function(){t.html(""),n()}):(t.html("").css("display","none"),n()),i&&t.removeAttr("title"))}function ke(){var t,e=this.s.fields,i=this.s.includeFields,n=!0;if(i)for(var s=0,o=i.length;s<o;s++){var r=e[i[s]],a=r.multiEditable();r.isMultiValue()&&a&&n?n=!(t=!0):t=!(!r.isMultiValue()||a),e[i[s]].multiInfoShown(t)}}function Fe(t){var e,i=this.s.displayController._show;i&&i.length?1<i.length?(i.pop(),e=i[i.length-1],t&&t(),this.s.displayController.open(e.dte,e.append,e.callback)):(this.s.displayController.close(this,t),i.length=0):t&&t()}function Oe(t,e){var i=this.s.displayController;i._show||(i._show=[]),e||(i._show.length=0),i._show.push({append:this.dom.wrapper,callback:t,dte:this}),this.s.displayController.open(this,this.dom.wrapper,t)}function Ae(t,e){var i=this,n=this.s.displayController.captureFocus;return void 0===n&&(n=!0),w(this.dom.form).off("submit.editor-internal").on("submit.editor-internal",function(t){t.preventDefault()}),!n||"main"!==t&&"bubble"!==t||w("body").on("focus.editor-focus",function(){0===w(y.activeElement).parents(".DTE").length&&0===w(y.activeElement).parents(".DTED").length&&i.s.setFocus&&i.s.setFocus.focus()}),this._multiInfo(),this._event("open",[t,this.s.action]),e&&this._event("opened",[t,this.s.action]),!0}function Se(t){return!1===this._event("preOpen",[t,this.s.action])?(this._clearDynamicInfo(),this._event("cancelOpen",[t,this.s.action]),"inline"!==this.s.mode&&"bubble"!==this.s.mode||!this.s.closeIcb||this.s.closeIcb(),this.s.closeIcb=null,!1):(this._clearDynamicInfo(!0),this.s.displayed=t,!0)}function Ie(t){var e=this.classes.processing.active;w(["div.DTE",this.dom.wrapper]).toggleClass(e,t),this.s.processing=t,this._event("processing",[t])}function je(t){var i=!1;return w.each(this.s.fields,function(t,e){e.processing()&&(i=!0)}),i&&this.one("processing-field",function(){!0===this._noProcessing(t)&&this._submit.apply(this,t)}),!i}function Pe(n,s,t,o){var r,a=this,d=!1,e={},i={},u=_,c=this.s.fields,l=this.s.editCount,p=this.s.editFields,f=this.s.editData,h=this.s.editOpts,m=h.submit;if(!1===this._noProcessing(arguments))P.error("Field is still processing",16,!1);else{var v=this.s.action,b={data:{}};if("create"===(b[this.s.actionName]=v)||"edit"===v)if(w.each(p,function(o,r){var a={},l={};w.each(c,function(t,e){var i,n,s;r.fields[t]&&e.submittable()&&(s=e.multiGet(),i=u(t),void 0===s[o]?(n=e.valFromData(r.data),i(a,n)):(n=s[o],s=Array.isArray(n)&&"string"==typeof t&&-1!==t.indexOf("[]")?u(t.replace(/\[.*$/,"")+"-many-count"):null,i(a,n),s&&s(a,n.length),"edit"!==v||f[t]&&e.compare(n,f[t][o])||(i(l,n),d=!0,s&&s(l,n.length))))}),w.isEmptyObject(a)||(e[o]=a),w.isEmptyObject(l)||(i[o]=l)}),"create"===v||"all"===m||"allIfChanged"===m&&d)b.data=e;else{if("changed"!==m||!d)return this.s.action=null,"close"!==h.onComplete||void 0!==o&&!o?"function"==typeof h.onComplete&&h.onComplete(this):this._close(!1),n&&n.call(this),this._processing(!1),void this._event("submitComplete");b.data=i}else"remove"===v&&w.each(p,function(t,e){b.data[t]=e.data});r=w.extend(!0,{},b),t&&t(b),this._event("preSubmit",[b,v],function(t){!1===t?a._processing(!1):(a.s.ajax?a._ajax:a._submitTable).call(a,b,function(t,e,i){a._submitSuccess(t,e,b,r,a.s.action,l,o,n,s,i)},function(t,e,i){a._submitError(t,e,i,s,b,a.s.action)},b)})}}function Ne(t,e,i,n){var s,o=t.action,r={data:[]},a=u(this.s.idSrc),l=_(this.s.idSrc);"remove"!==o&&(s="main"===this.s.mode?this._dataSource("fields",this.modifier()):this._dataSource("individual",this.modifier()),w.each(t.data,function(t,e){var i,n=d,n=(i="edit"===o?(i=n({},s[t].data),n(i,e)):n({},e),a(i));l(i,"create"===o&&void 0===n?+new Date+t.toString():n),r.data.push(i)})),e(r)}function Re(t,e,i,n,s,o,r,a,l,d){var u=this,c=this.s.fields,p=this.s.editOpts,f=this.s.modifier;if(this._event("postSubmit",[t,i,s,d]),t.error||(t.error=""),t.fieldErrors||(t.fieldErrors=[]),e||t.error||t.fieldErrors.length){var h=[];t.error&&h.push(t.error),w.each(t.fieldErrors,function(t,e){var i=c[e.name];if(!i)throw new Error("Unknown field: "+e.name);i.displayed()?(i.error(e.status||"Error"),0===t&&("focus"===p.onFieldError?(u._animate(w(u.dom.bodyContent),{scrollTop:w(i.node()).position().top},500),i.focus()):"function"==typeof p.onFieldError&&p.onFieldError(u,e))):h.push(i.name()+": "+(e.status||"Error"))}),this.error(h.join("<br>")),this._event("submitUnsuccessful",[t]),l&&l.call(this,t)}else{var m={};if(!t.data||"create"!==s&&"edit"!==s)"remove"===s&&(this._dataSource("prep",s,f,n,t,m),this._event("preRemove",[t,this.ids()]),this._dataSource("remove",f,c,m),this._event(["remove","postRemove"],[t,this.ids()]),this._dataSource("commit",s,f,t.data,m));else{this._dataSource("prep",s,f,n,t,m);for(var v=0,b=t.data;v<b.length;v++){var _=b[v],y=_,g=this._dataSource("id",_);this._event("setData",[t,_,s]),"create"===s?(this._event("preCreate",[t,_,g]),this._dataSource("create",c,_,m),this._event(["create","postCreate"],[t,_,g])):"edit"===s&&(this._event("preEdit",[t,_,g]),this._dataSource("edit",f,c,_,m),this._event(["edit","postEdit"],[t,_,g]))}this._dataSource("commit",s,f,t.data,m)}o===this.s.editCount&&(i=this.s.action,this.s.action=null,"close"!==p.onComplete||void 0!==r&&!r?"function"==typeof p.onComplete&&p.onComplete(this):this._close(!!t.data,i)),a&&a.call(this,t),this._event("submitSuccess",[t,y,s])}this._processing(!1),this._event("submitComplete",[t,y,s])}function Be(t,e,i,n,s,o){this._event("postSubmit",[null,s,o,t]),this.error(this.i18n.error.system),this._processing(!1),n&&n.call(this,t,e,i),this._event(["submitError","submitComplete"],[t,e,i,s])}function Le(i){var n=this,s=this.s.table?new ne.Api(this.s.table):null,o=!1;return s&&(o=s.settings()[0].oFeatures.bServerSide),this.s.processing?(this.one("submitComplete",function(){o?s.one("draw",i):setTimeout(function(){i()},10)}),!0):("inline"===this.display()||"bubble"===this.display())&&(this.one("close",function(){n.s.processing?n.one("submitComplete",function(t,e){o&&e?s.one("draw",i):setTimeout(function(){n.s&&i()},10)}):setTimeout(function(){n.s&&i()},10)}).blur(),!0)}function Me(t,e){for(var i=0,n=e.length;i<n;i++)if(t==e[i])return i;return-1}var Ue={create:function(){},disable:function(){},enable:function(){},get:function(){},set:function(){}},C=w.fn.dataTable;function Ve(t,e){null==e&&(e=t.uploadText||"Choose file..."),t._input.find("div.upload button").html(e)}function He(i,e,n,t){var s,o=i.classes.form.buttonInternal,r=w('<div class="editor_upload"><div class="eu_table"><div class="row"><div class="cell upload limitHide"><button class="'+o+'"></button><input type="file" '+((t=void 0===t?!1:t)?"multiple":"")+'></input></div><div class="cell clearValue"><button class="'+o+'"></button></div></div><div class="row second"><div class="cell limitHide"><div class="drop"><span></span></div></div><div class="cell"><div class="rendered"></div></div></div></div></div>');return e._input=r,e._enabled=!0,e.id&&r.find("input[type=file]").attr("id",P.safeId(e.id)),e.attr&&r.find("input[type=file]").attr(e.attr),Ve(e),p.FileReader&&!1!==e.dragDrop?(r.find("div.drop span").text(e.dragDropText||"Drag and drop a file here to upload"),(s=r.find("div.drop")).on("drop",function(t){return e._enabled&&(P.upload(i,e,t.originalEvent.dataTransfer.files,Ve,n),s.removeClass("over")),!1}).on("dragleave dragexit",function(t){return e._enabled&&s.removeClass("over"),!1}).on("dragover",function(t){return e._enabled&&s.addClass("over"),!1}),i.on("open",function(){w("body").on("dragover.DTE_Upload drop.DTE_Upload",function(t){return!1})}).on("close",function(){w("body").off("dragover.DTE_Upload drop.DTE_Upload")})):(r.addClass("noDrop"),r.append(r.find("div.rendered"))),r.find("div.clearValue button").on("click",function(t){t.preventDefault(),e._enabled&&$e.set.call(i,e,"")}),r.find("input[type=file]").on("input",function(){P.upload(i,e,this.files,Ve,function(t,e){e||n.call(i,t),r.find("input[type=file]")[0].value=""})}),r}function k(t){setTimeout(function(){t.trigger("change",{editor:!0,editorSet:!0})},0)}var e=w.extend(!0,{},Ue,{canReturnSubmit:function(t,e){return!0},disable:function(t){t._input.prop("disabled",!0)},enable:function(t){t._input.prop("disabled",!1)},get:function(t){return t._input.val()},set:function(t,e){t._input.val(e),k(t._input)}}),qe={create:function(t){return t._input=w("<input/>"),t._val=t.value,null},get:function(t){return t._val},set:function(t,e){var i=t._val;t._val=e,t._input.val(e),i!==e&&k(t._input)}},We=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),readonly:"readonly",type:"text"},t.attr||{})),t._input[0]}}),ze=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),type:"text"},t.attr||{})),t._input[0]}}),Ge=w.extend(!0,{},e,{create:function(t){return t._input=w("<input/>").attr(w.extend({id:P.safeId(t.id),type:"password"},t.attr||{})),t._input[0]}}),Je=w.extend(!0,{},e,{canReturnSubmit:function(t,e){return!1},create:function(t){return t._input=w("<textarea></textarea>").attr(w.extend({id:P.safeId(t.id)},t.attr||{})),t._input[0]}}),n=w.extend(!0,{},e,{_addOptions:function(t,e,i){var n,s=t._input[0].options,o=0;(i=void 0===i?!1:i)?o=s.length:void(s.length=0)!==t.placeholder&&(i=void 0!==t.placeholderValue?t.placeholderValue:"",o+=1,s[0]=new Option(t.placeholder,i),n=void 0===t.placeholderDisabled||t.placeholderDisabled,s[0].hidden=n,s[0].disabled=n,s[0]._editor_val=i),e&&P.pairs(e,t.optionsPair,function(t,e,i,n){e=new Option(e,t);e._editor_val=t,n&&w(e).attr(n),s[i+o]=e})},create:function(i){return i._input=w("<select></select>").attr(w.extend({id:P.safeId(i.id),multiple:!0===i.multiple},i.attr||{})).on("change.dte",function(t,e){e&&e.editor||(i._lastSet=n.get(i))}),n._addOptions(i,i.options||i.ipOpts),i._input[0]},destroy:function(t){t._input.off("change.dte")},get:function(t){var e=t._input.find("option:selected").map(function(){return this._editor_val}).toArray();return t.multiple?t.separator?e.join(t.separator):e:e.length?e[0]:null},set:function(t,e,i){i||(t._lastSet=e),t.multiple&&t.separator&&!Array.isArray(e)?e="string"==typeof e?e.split(t.separator):[]:Array.isArray(e)||(e=[e]);var n,s,o=e.length,r=!1,a=t._input.find("option");return t._input.find("option").each(function(){for(s=!1,n=0;n<o;n++)if(this._editor_val==e[n]){r=s=!0;break}this.selected=s}),t.placeholder&&!r&&!t.multiple&&a.length&&(a[0].selected=!0),i||k(t._input),r},update:function(t,e,i){n._addOptions(t,e,i);e=t._lastSet;void 0!==e&&n.set(t,e,!0),k(t._input)}}),s=w.extend(!0,{},e,{_addOptions:function(s,t,e){var o=s._input,r=0;(e=void 0===e?!1:e)?r=w("input",o).length:o.empty(),t&&P.pairs(t,s.optionsPair,function(t,e,i,n){o.append('<div><input id="'+P.safeId(s.id)+"_"+(i+r)+'" type="checkbox" /><label for="'+P.safeId(s.id)+"_"+(i+r)+'">'+e+"</label></div>"),w("input:last",o).attr("value",t)[0]._editor_val=t,n&&w("input:last",o).attr(n)})},create:function(t){return t._input=w("<div></div>"),s._addOptions(t,t.options||t.ipOpts),t._input[0]},disable:function(t){t._input.find("input").prop("disabled",!0)},enable:function(t){t._input.find("input").prop("disabled",!1)},get:function(t){var e=[],i=t._input.find("input:checked");return i.length?i.each(function(){e.push(this._editor_val)}):void 0!==t.unselectedValue&&e.push(t.unselectedValue),void 0===t.separator||null===t.separator?e:e.join(t.separator)},set:function(t,e){var i,n,s=t._input.find("input"),o=(Array.isArray(e)||"string"!=typeof e?Array.isArray(e)||(e=[e]):e=e.split(t.separator||"|"),e.length);s.each(function(){for(n=!1,i=0;i<o;i++)if(this._editor_val==e[i]){n=!0;break}this.checked=n}),k(s)},update:function(t,e,i){var n=s.get(t);s._addOptions(t,e,i),s.set(t,n)}}),F=w.extend(!0,{},e,{_addOptions:function(s,t,e){var o=s._input,r=0;(e=void 0===e?!1:e)?r=w("input",o).length:o.empty(),t&&P.pairs(t,s.optionsPair,function(t,e,i,n){o.append('<div><input id="'+P.safeId(s.id)+"_"+(i+r)+'" type="radio" name="'+s.name+'" /><label for="'+P.safeId(s.id)+"_"+(i+r)+'">'+e+"</label></div>"),w("input:last",o).attr("value",t)[0]._editor_val=t,n&&w("input:last",o).attr(n)})},create:function(t){return t._input=w("<div />"),F._addOptions(t,t.options||t.ipOpts),this.on("open",function(){t._input.find("input").each(function(){this._preChecked&&(this.checked=!0)})}),t._input[0]},disable:function(t){t._input.find("input").prop("disabled",!0)},enable:function(t){t._input.find("input").prop("disabled",!1)},get:function(t){var e=t._input.find("input:checked");return e.length?e[0]._editor_val:void 0!==t.unselectedValue?t.unselectedValue:void 0},set:function(t,e){t._input.find("input").each(function(){this._preChecked=!1,this._editor_val==e?(this.checked=!0,this._preChecked=!0):(this.checked=!1,this._preChecked=!1)}),k(t._input.find("input:checked"))},update:function(t,e,i){var n=F.get(t),e=(F._addOptions(t,e,i),t._input.find("input"));F.set(t,e.filter('[value="'+n+'"]').length?n:e.eq(0).attr("value"))}}),Xe=w.extend(!0,{},e,{create:function(t){return t._input=w("<input />").attr(w.extend(!0,{id:P.safeId(t.id),type:"text"},t.attr)),C.DateTime||P.error("DateTime library is required",15),t.momentLocale&&!t.opts.locale&&(t.opts.locale=t.momentLocale),t.momentStrict&&!t.opts.strict&&(t.opts.strict=t.momentStrict),t._picker=new C.DateTime(t._input,w.extend({format:t.displayFormat||t.format,i18n:this.i18n.datetime},t.opts)),!(t._closeFn=function(){t._picker.hide()})===t.keyInput&&t._input.on("keydown",function(t){t.preventDefault()}),this.on("close",t._closeFn),t._input[0]},destroy:function(t){this.off("close",t._closeFn),t._input.off("keydown"),t._picker.destroy()},errorMessage:function(t,e){t._picker.errorMsg(e)},get:function(t){return t.wireFormat?t._picker.valFormat(t.wireFormat):t._input.val()},maxDate:function(t,e){t._picker.max(e)},minDate:function(t,e){t._picker.min(e)},owns:function(t,e){return t._picker.owns(e)},set:function(t,e){"string"==typeof e&&e&&0!==e.indexOf("--")&&t.wireFormat?t._picker.valFormat(t.wireFormat,e):t._picker.val(e),k(t._input)}}),$e=w.extend(!0,{},e,{canReturnSubmit:function(t,e){return!1},create:function(e){var i=this;return He(i,e,function(t){$e.set.call(i,e,t[0]),i._event("postUpload",[e.name,t[0]])})},disable:function(t){t._input.find("input").prop("disabled",!0),t._enabled=!1},enable:function(t){t._input.find("input").prop("disabled",!1),t._enabled=!0},get:function(t){return t._val},set:function(t,e){t._val=e,t._input.val("");var i=t._input,n=(t.display&&(n=i.find("div.rendered"),t._val?n.html(t.display(t._val)):n.empty().append("<span>"+(t.noFileText||"No file")+"</span>")),i.find("div.clearValue button"));e&&t.clearText?(n.html(t.clearText),i.removeClass("noClear")):i.addClass("noClear"),t._input.find("input").triggerHandler("upload.editor",[t._val])}}),O=w.extend(!0,{},e,{_showHide:function(t){t.limit&&(t._container.find("div.limitHide").css("display",t._val.length>=t.limit?"none":"block"),t._limitLeft=t.limit-t._val.length)},canReturnSubmit:function(t,e){return!1},create:function(e){var i=this,t=He(i,e,function(t){e._val=e._val.concat(t),O.set.call(i,e,e._val),i._event("postUpload",[e.name,e._val])},!0);return t.addClass("multi").on("click","button.remove",function(t){t.stopPropagation(),e._enabled&&(t=w(this).data("idx"),e._val.splice(t,1),O.set.call(i,e,e._val))}),e._container=t},disable:function(t){t._input.find("input").prop("disabled",!0),t._enabled=!1},enable:function(t){t._input.find("input").prop("disabled",!1),t._enabled=!0},get:function(t){return t._val},set:function(i,t){if(t=t||[],!Array.isArray(t))throw new Error("Upload collections must have an array as a value");i._val=t,i._input.val("");var n,s=this,e=i._input;i.display&&(e=e.find("div.rendered").empty(),t.length?(n=w("<ul></ul>").appendTo(e),w.each(t,function(t,e){e=i.display(e,t);null!==e&&n.append("<li>"+e+' <button class="'+s.classes.form.button+' remove" data-idx="'+t+'">&times;</button></li>')})):e.append("<span>"+(i.noFileText||"No files")+"</span>")),O._showHide(i),i._input.find("input").triggerHandler("upload.editor",[i._val])}}),A=w.extend(!0,{},e,{_addOptions:function(t,e,i){t=t.dt;(i=void 0===i?!1:i)||t.clear(),t.rows.add(e).draw()},_jumpToFirst:function(t,e){function i(){var t=s.row({order:"applied",selected:!0}).node();t&&r.height()-10<(t=w(t).position().top)&&r.scrollTop(t)}var n,s=t.dt,t=s.row({order:"applied",selected:!0}).index(),o=0,r=("number"==typeof t&&(n=s.page.info().length,t=s.rows({order:"applied"}).indexes().indexOf(t),o=0<n?Math.floor(t/n):0),s.page(o).draw(!1),w("div.dataTables_scrollBody",s.table().container()));r.length&&(r.parents("body").length?i():e.one("open",function(){i()}))},create:function(r){var a=this,n=(r.optionsPair=w.extend({label:"label",value:"value"},r.optionsPair),w("<table>")),t=w("<div>").append(n),s=w('<div class="DTE_Field_Type_datatable_info">'),e=C.versionCheck("2"),i=(r.footer&&w("<tfoot>").append(Array.isArray(r.footer)?w("<tr>").append(w.map(r.footer,function(t){return w("<th>").html(t)})):r.footer).appendTo(n),r.config&&r.config.buttons&&r.config.buttons.length),l=n.addClass(A.tableClass).width("100%").on("init.dt",function(t,e){var i;e.nTable===n[0]&&(e=new C.Api(e),i=w(e.table(void 0).container()),C.select.init(e),s.append(i.find("div.dt-search")).append(i.find("div.dataTables_filter")).append(i.find("div.dt-buttons")).append(i.find("div.dt-info")).append(i.find("div.dataTables_info")))}).DataTable(w.extend({buttons:[],columns:[{data:r.optionsPair.label,title:"Label"}],deferRender:!0,dom:e?null:"fiBtp",language:{paginate:{next:">",previous:"<"},search:"",searchPlaceholder:"Search"},layout:e?{top:i?["search","buttons","info"]:["search","info"],bottom:["paging"],bottomStart:null,bottomEnd:null,topStart:null,topEnd:null}:null,lengthChange:!1,select:{style:r.multiple?"os":"single"}},r.config));return this.on("open",function(){l.search()&&l.search("").draw(),l.columns.adjust()}),l.on("user-select",function(){k(w(r.dt.table().container()))}),r.editor&&(r.editor.table(l),r.editor.on("submitComplete",function(t,e,i,n){if("create"===n)for(var s=0,o=e.data;s<o.length;s++)!function(i){l.rows(function(t,e){return e===i}).select()}(o[s]);else"edit"!==n&&"remove"!==n||a._dataSource("refresh");A._jumpToFirst(r,a)})),r.dt=l,A._addOptions(r,r.options||[]),{input:t,side:s}},disable:function(t){t.dt.select.style("api"),t.dt.buttons().container().css("display","none")},dt:function(t){return t.dt},enable:function(t){t.dt.select.style(t.multiple?"os":"single"),t.dt.buttons().container().css("display","block")},get:function(t){var e=t.dt.rows({selected:!0}).data().pluck(t.optionsPair.value).toArray();return t.separator||!t.multiple?e.join(t.separator||","):e},set:function(t,n,e){t.multiple&&t.separator&&!Array.isArray(n)?n="string"==typeof n?n.split(t.separator):[]:Array.isArray(n)||(n=[n]);var s=u(t.optionsPair.value);t.dt.rows({selected:!0}).deselect(),t.dt.rows(function(t,e,i){return-1!==n.indexOf(s(e))}).select(),A._jumpToFirst(t,this),e||k(w(t.dt.table().container()))},tableClass:"",update:function(t,e,i){A._addOptions(t,e,i);e=t._lastSet;void 0!==e&&A.set(t,e,!0),k(w(t.dt.table().container()))}}),e={className:"",compare:null,data:"",def:"",entityDecode:!0,fieldInfo:"",getFormatter:null,id:"",label:"",labelInfo:"",message:"",multiEditable:!0,name:null,nullDefault:!1,setFormatter:null,submit:!0,type:"text"},Qe=w.fn.dataTable,e=(S.prototype.def=function(t){var e,i=this.s.opts;return void 0===t?"function"==typeof(e=void 0!==i.default?i.default:i.def)?e():e:(i.def=t,this)},S.prototype.disable=function(){return this.dom.container.addClass(this.s.classes.disabled),this._typeFn("disable"),this},S.prototype.displayed=function(){var t=this.dom.container;return!(!t.parents("body").length||"none"===t.css("display"))},S.prototype.enable=function(t){return!1===(t=void 0===t?!0:t)?this.disable():(this.dom.container.removeClass(this.s.classes.disabled),this._typeFn("enable"),this)},S.prototype.enabled=function(){return!1===this.dom.container.hasClass(this.s.classes.disabled)},S.prototype.error=function(t,e){var i=this.s.classes;return t?this.dom.container.addClass(i.error):this.dom.container.removeClass(i.error),this._typeFn("errorMessage",t),this._msg(this.dom.fieldError,t,e)},S.prototype.fieldInfo=function(t){return this._msg(this.dom.fieldInfo,t)},S.prototype.isMultiValue=function(){return this.s.multiValue&&1!==this.s.multiIds.length},S.prototype.inError=function(){return this.dom.container.hasClass(this.s.classes.error)},S.prototype.input=function(){return this.s.type.input?this._typeFn("input"):w("input, select, textarea",this.dom.container)},S.prototype.focus=function(){return this.s.type.focus?this._typeFn("focus"):w("input, select, textarea",this.dom.container).focus(),this},S.prototype.get=function(){if(!this.isMultiValue())return this._format(this._typeFn("get"),this.s.opts.getFormatter)},S.prototype.hide=function(t){var e=this.dom.container,i=parseFloat(w(this.s.host.displayNode()).css("opacity"));return void 0===t&&(t=!0),this.s.host.display()&&.5<i&&t&&w.fn.slideUp?e.slideUp():e.css("display","none"),this},S.prototype.label=function(t){var e=this.dom.label,i=this.dom.labelInfo.detach();return void 0===t?e.html():(e.html(t),e.append(i),this)},S.prototype.labelInfo=function(t){return this._msg(this.dom.labelInfo,t)},S.prototype.message=function(t,e){return this._msg(this.dom.fieldMessage,t,e)},S.prototype.multiGet=function(t){var e=this.s.multiValues,i=this.s.multiIds,n=this.isMultiValue();if(void 0===t)for(var s=this.val(),o={},r=0,a=i;r<a.length;r++){var l=a[r];o[l]=n?e[l]:s}else o=n?e[t]:this.val();return o},S.prototype.multiRestore=function(){this.s.multiValue=!0,this._multiValueCheck()},S.prototype.multiSet=function(t,i,e){void 0===e&&(e=!0);function n(t,e){-1===w.inArray(t,r)&&r.push(t),o[t]=s._format(e,s.s.opts.setFormatter)}var s=this,o=this.s.multiValues,r=this.s.multiIds;void 0===i&&(i=t,t=void 0);return w.isPlainObject(i)&&void 0===t?w.each(i,function(t,e){n(t,e)}):void 0===t?w.each(r,function(t,e){n(e,i)}):n(t,i),this.s.multiValue=!0,e&&this._multiValueCheck(),this},S.prototype.name=function(){return this.s.opts.name},S.prototype.node=function(){return this.dom.container[0]},S.prototype.nullDefault=function(){return this.s.opts.nullDefault},S.prototype.processing=function(t){return void 0===t?this.s.processing:(this.dom.processing.css("display",t?"block":"none"),this.s.processing=t,this.s.host.internalEvent("processing-field",[t]),this)},S.prototype.set=function(t,e){void 0===e&&(e=!0);function i(t){return"string"!=typeof t?t:t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#163;/g,"£").replace(/&#0?39;/g,"'").replace(/&#0?10;/g,"\n")}this.s.multiValue=!1;var n=this.s.opts.entityDecode;if(void 0===n||!0===n)if(Array.isArray(t))for(var s=0,o=t.length;s<o;s++)t[s]=i(t[s]);else t=i(t);return!0===e?(t=this._format(t,this.s.opts.setFormatter),this._typeFn("set",t),this._multiValueCheck()):this._typeFn("set",t),this},S.prototype.show=function(t,e){var i;return void 0===t&&(t=!0),!1===(e=void 0===e?!0:e)?this.hide(t):(e=this.dom.container,i=parseFloat(w(this.s.host.displayNode()).css("opacity")),this.s.host.display()&&.5<i&&t&&w.fn.slideDown?e.slideDown():e.css("display",""),this)},S.prototype.update=function(t,e){return void 0===e&&(e=!1),this.s.type.update&&this._typeFn("update",t,e),this},S.prototype.val=function(t){return void 0===t?this.get():this.set(t)},S.prototype.compare=function(t,e){return(this.s.opts.compare||l)(t,e)},S.prototype.dataSrc=function(){return this.s.opts.data},S.prototype.destroy=function(){return this.dom.container.remove(),this._typeFn("destroy"),this},S.prototype.multiEditable=function(){return this.s.opts.multiEditable},S.prototype.multiIds=function(){return this.s.multiIds},S.prototype.multiInfoShown=function(t){this.dom.multiInfo.css({display:t?"block":"none"})},S.prototype.multiReset=function(){this.s.multiIds=[],this.s.multiValues={}},S.prototype.submittable=function(){return this.s.opts.submit},S.prototype._msg=function(t,e,i){var n;return void 0===e?t.html():("function"==typeof e&&(e=e(n=this.s.host,new Qe.Api(n.internalSettings().table))),t.parent().is(":visible")&&w.fn.animate?(t.html(e),e?t.slideDown(i):t.slideUp(i)):(t.html(e||"").css("display",e?"block":"none"),i&&i()),this)},S.prototype._multiValueCheck=function(){var t,e,i=this.s.multiIds,n=this.s.multiValues,s=this.s.multiValue,o=this.s.opts.multiEditable,r=!1;if(i)for(var a=0;a<i.length;a++){if(e=n[i[a]],0<a&&!l(e,t)){r=!0;break}t=e}r&&s||!o&&this.isMultiValue()?(this.dom.inputControl.css({display:"none"}),this.dom.multi.css({display:"block"})):(this.dom.inputControl.css({display:"block"}),this.dom.multi.css({display:"none"}),s&&!r&&this.set(t,!1)),this.dom.multiReturn.css({display:i&&1<i.length&&r&&!s?"block":"none"});s=this.s.host.internalI18n().multi;return this.dom.multiInfo.html(o?s.info:s.noMulti),this.dom.multi.toggleClass(this.s.classes.multiNoEdit,!o),this.s.host.internalMultiInfo(),!0},S.prototype._typeFn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];e.unshift(this.s.opts);t=this.s.type[t];if(t)return t.apply(this.s.host,e)},S.prototype._errorNode=function(){return this.dom.fieldError},S.prototype._format=function(t,e){var i,n;return e?(Array.isArray(e)&&(n=(i=e.slice()).shift(),e=S.formatters[n].apply(this,i)),e.call(this.s.host,t,this)):t},S.defaults=e,S.formatters={},S);function S(t,e,i){var n=this,s=i.internalI18n().multi,o=w.extend(!0,{},S.defaults,t);if(!P.fieldTypes[o.type])throw new Error("Error adding field - unknown field type "+o.type);this.s={classes:e,host:i,multiIds:[],multiValue:!1,multiValues:{},name:o.name,opts:o,processing:!1,type:P.fieldTypes[o.type]},o.id||(o.id=("DTE_Field_"+o.name).replace(/ /g,"_")),""===o.data&&(o.data=o.name),this.valFromData=function(t){return u(o.data)(t,"editor")},this.valToData=_(o.data);var r=w('<div class="'+e.wrapper+" "+e.typePrefix+o.type+" "+e.namePrefix+o.name+" "+o.className+'"><label data-dte-e="label" class="'+e.label+'" for="'+P.safeId(o.id)+'">'+o.label+'<div data-dte-e="msg-label" class="'+e["msg-label"]+'">'+o.labelInfo+'</div></label><div data-dte-e="input" class="'+e.input+'"><div data-dte-e="input-control" class="'+e.inputControl+'"></div><div data-dte-e="multi-value" class="'+e.multiValue+'">'+s.title+'<span data-dte-e="multi-info" class="'+e.multiInfo+'">'+s.info+'</span></div><div data-dte-e="msg-multi" class="'+e.multiRestore+'">'+s.restore+'</div><div data-dte-e="msg-error" class="'+e["msg-error"]+'"></div><div data-dte-e="msg-message" class="'+e["msg-message"]+'">'+o.message+'</div><div data-dte-e="msg-info" class="'+e["msg-info"]+'">'+o.fieldInfo+'</div></div><div data-dte-e="field-processing" class="'+e.processing+'"><span></span></div></div>'),t=this._typeFn("create",o),i=null;t&&t.side&&(i=t.side,t=t.input),null!==t?a("input-control",r).prepend(t):r.css("display","none"),this.dom={container:r,fieldError:a("msg-error",r),fieldInfo:a("msg-info",r),fieldMessage:a("msg-message",r),inputControl:a("input-control",r),label:a("label",r).append(i),labelInfo:a("msg-label",r),multi:a("multi-value",r),multiInfo:a("multi-info",r),multiReturn:a("msg-multi",r),processing:a("field-processing",r)},this.dom.multi.on("click",function(){n.s.opts.multiEditable&&!r.hasClass(e.disabled)&&"readonly"!==o.type&&(n.val(""),n.focus())}),this.dom.multiReturn.on("click",function(){n.multiRestore()}),w.each(this.s.type,function(e,t){"function"==typeof t&&void 0===n[e]&&(n[e]=function(){var t=Array.prototype.slice.call(arguments),t=(t.unshift(e),n._typeFn.apply(n,t));return void 0===t?n:t})})}var Ze={action:null,className:null,tabIndex:0,text:null},Ke={close:function(){},init:function(){},node:function(){},open:function(){}},i=w.fn.dataTable.Api.register;function I(t){t=t.context[0];return t.oInit.editor||t._editor}function j(t,e,i,n){return void 0===(e=e||{}).buttons&&(e.buttons="_basic"),void 0===e.title&&(e.title=t.i18n[i].title),void 0===e.message&&("remove"===i?(t=t.i18n[i].confirm,e.message=1!==n?t._.replace(/%d/,n):t[1]):e.message=""),e}i("editor()",function(){return I(this)}),i("row.create()",function(t){var e=I(this);return e.create(j(e,t,"create")),this}),i("row().edit()",function(t){var e=I(this);return e.edit(this[0][0],j(e,t,"edit")),this}),i("rows().edit()",function(t){var e=I(this);return e.edit(this[0],j(e,t,"edit")),this}),i("row().delete()",function(t){var e=I(this);return e.remove(this[0][0],j(e,t,"remove",1)),this}),i("rows().delete()",function(t){var e=I(this);return e.remove(this[0],j(e,t,"remove",this[0].length)),this}),i("cell().edit()",function(t,e){return t?w.isPlainObject(t)&&(e=t,t="inline"):t="inline",I(this)[t](this[0][0],e),this}),i("cells().edit()",function(t){return I(this).bubble(this[0],t),this}),i("file()",Ct),i("files()",kt),w(y).on("xhr.dt",function(t,e,i){"dt"===t.namespace&&i&&i.files&&w.each(i.files,function(t,e){P.files[t]||(P.files[t]={}),w.extend(P.files[t],e)})});var P,i=w.fn.dataTable.ext.buttons;if(w.extend(i,{create:{action:function(t,e,i,n){var s=this,o=n.editor;this.processing(!0),o.one("preOpen",function(){s.processing(!1)}).create(w.extend({buttons:n.formButtons,message:n.formMessage||o.i18n.create.message,nest:!0,title:n.formTitle||o.i18n.create.title},n.formOptions))},className:"buttons-create",editor:null,formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n.create.submit}},formMessage:null,formOptions:{},formTitle:null,text:function(t,e,i){return t.i18n("buttons.create",i.editor.i18n.create.button)}},createInline:{action:function(t,e,i,n){n.editor.inlineCreate(n.position,n.formOptions)},className:"buttons-create",editor:null,formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n.create.submit}},formOptions:{},position:"start",text:function(t,e,i){return t.i18n("buttons.create",i.editor.i18n.create.button)}},edit:{action:function(t,e,i,n){var s=this,o=n.editor,r=e.rows({selected:!0}).indexes(),a=e.columns({selected:!0}).indexes(),e=e.cells({selected:!0}).indexes(),e=a.length||e.length?{cells:e,columns:a,rows:r}:r;this.processing(!0),o.one("preOpen",function(){s.processing(!1)}).edit(e,w.extend({buttons:n.formButtons,message:n.formMessage||o.i18n.edit.message,nest:!0,title:n.formTitle||o.i18n.edit.title},n.formOptions))},className:"buttons-edit",editor:null,extend:"selected",formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n.edit.submit}},formMessage:null,formOptions:{},formTitle:null,text:function(t,e,i){return t.i18n("buttons.edit",i.editor.i18n.edit.button)}},remove:{action:function(t,e,i,n){var s=this,o=n.editor;this.processing(!0),o.one("preOpen",function(){s.processing(!1)}).remove(e.rows({selected:!0}).indexes(),w.extend({buttons:n.formButtons,message:n.formMessage,nest:!0,title:n.formTitle||o.i18n.remove.title},n.formOptions))},className:"buttons-remove",editor:null,extend:"selected",formButtons:{action:function(t){this.submit()},text:function(t){return t.i18n.remove.submit}},formMessage:function(t,e){e=e.rows({selected:!0}).indexes(),t=t.i18n.remove;return("string"==typeof t.confirm?t.confirm:t.confirm[e.length]||t.confirm._).replace(/%d/g,e.length)},formOptions:{},formTitle:null,limitTo:["rows"],text:function(t,e,i){return t.i18n("buttons.remove",i.editor.i18n.remove.button)}}}),i.editSingle=w.extend({},i.edit),i.editSingle.extend="selectedSingle",i.removeSingle=w.extend({},i.remove),i.removeSingle.extend="selectedSingle",r&&r.versionCheck&&r.versionCheck("1.10.20"))return N.prototype.internalEvent=function(t,e){this._event(t,e)},N.prototype.internalI18n=function(){return this.i18n},N.prototype.internalMultiInfo=function(){return this._multiInfo()},N.prototype.internalSettings=function(){return this.s},N.fieldTypes={checkbox:s,datatable:A,datetime:Xe,hidden:qe,password:Ge,radio:F,readonly:We,select:n,text:ze,textarea:Je,upload:$e,uploadMany:O},N.files={},N.version="2.3.2",N.classes=G,N.Field=e,N.DateTime=null,N.error=Yt,N.pairs=te,N.factory=ie,N.upload=ee,N.defaults=R,N.models={button:Ze,displayController:Ke,fieldType:Ue,formOptions:t,settings:B},N.dataSources={dataTable:v,html:b},N.display={envelope:T,lightbox:x},N.safeId=function(t){return void 0===(e="")&&(e="#"),"string"==typeof(t=t)?e+t.replace(/\./g,"-"):e+t;var e},P=N,r.Editor=P,w.fn.DataTable.Editor=P,r.DateTime&&(P.DateTime=r.DateTime),r.ext.editorFields&&w.extend(P.fieldTypes,r.ext.editorFields),r.ext.editorFields=P.fieldTypes,r.Editor;throw new Error("Editor requires DataTables 1.10.20 or newer");function N(t,e){var s=this;if(this.add=nt,this.ajax=st,this.background=ot,this.blur=rt,this.bubble=at,this.bubbleLocation=lt,this.bubblePosition=dt,this.buttons=ut,this.clear=ct,this.close=pt,this.create=ft,this.undependent=ht,this.dependent=mt,this.destroy=vt,this.disable=bt,this.display=_t,this.displayed=yt,this.displayNode=gt,this.edit=wt,this.enable=Et,this.error=Tt,this.field=Dt,this.fields=xt,this.file=Ct,this.files=kt,this.get=Ft,this.hide=Ot,this.ids=At,this.inError=St,this.inline=It,this.inlineCreate=jt,this.message=Pt,this.mode=Nt,this.modifier=Rt,this.multiGet=Bt,this.multiSet=Lt,this.node=Mt,this.off=Ut,this.on=Vt,this.one=Ht,this.open=qt,this.order=Wt,this.remove=zt,this.set=Gt,this.show=Jt,this.submit=Xt,this.table=$t,this.template=Qt,this.title=Zt,this.val=Kt,this._actionClass=oe,this._ajax=re,this._animate=ae,this._assembleMain=le,this._blur=de,this._clearDynamicInfo=ue,this._close=ce,this._closeReg=pe,this._crudArgs=fe,this._dataSource=he,this._displayReorder=me,this._edit=ve,this._event=be,this._eventName=_e,this._fieldFromNode=ye,this._fieldNames=ge,this._focus=we,this._formOptions=Ee,this._inline=Te,this._inputTrigger=De,this._optionsUpdate=xe,this._message=Ce,this._multiInfo=ke,this._nestedClose=Fe,this._nestedOpen=Oe,this._postopen=Ae,this._preopen=Se,this._processing=Ie,this._noProcessing=je,this._submit=Pe,this._submitTable=Ne,this._submitSuccess=Re,this._submitError=Be,this._tidy=Le,this._weakInArray=Me,N.factory(t,e))return N;this instanceof N||alert("DataTables Editor must be initialised as a 'new' instance"),t=w.extend(!0,{},N.defaults,t),this.c=t,this.s=w.extend(!0,{},N.models.settings,{actionName:t.actionName,ajax:t.ajax,formOptions:t.formOptions,idSrc:t.idSrc,table:t.domTable||t.table,template:t.template?w(t.template).detach():null}),this.classes=w.extend(!0,{},N.classes),this.i18n=t.i18n,N.models.settings.unique++;var n=this,e=this.classes,i=w('<div class="'+e.wrapper+'"><div data-dte-e="processing" class="'+e.processing.indicator+'"><span></span></div><div data-dte-e="body" class="'+e.body.wrapper+'"><div data-dte-e="body_content" class="'+e.body.content+'"></div></div><div data-dte-e="foot" class="'+e.footer.wrapper+'"><div class="'+e.footer.content+'"></div></div></div>'),o=w('<form data-dte-e="form" class="'+e.form.tag+'"><div data-dte-e="form_content" class="'+e.form.content+'"></div></form>');if(this.dom={body:a("body",i)[0],bodyContent:a("body_content",i)[0],buttons:w('<div data-dte-e="form_buttons" class="'+e.form.buttons+'"></div>')[0],footer:a("foot",i)[0],form:o[0],formContent:a("form_content",o)[0],formError:w('<div data-dte-e="form_error" class="'+e.form.error+'"></div>')[0],formInfo:w('<div data-dte-e="form_info" class="'+e.form.info+'"></div>')[0],header:w('<div data-dte-e="head" class="'+e.header.wrapper+'"><div class="'+e.header.content+'"></div></div>')[0],processing:a("processing",i)[0],wrapper:i[0]},w.each(t.events,function(t,i){n.on(t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(n,t)})}),this.dom,t.fields&&this.add(t.fields),w(y).on("init.dt.dte"+this.s.unique,function(t,e,i){var n=s.s.table;n&&(n=new r.Api(n),e.nTable===n.table().node())&&(e._editor=s)}).on("i18n.dt.dte"+this.s.unique,function(t,e){var i=s.s.table;i&&(i=new r.Api(i),e.nTable===i.table().node())&&e.oLanguage.editor&&w.extend(!0,s.i18n,e.oLanguage.editor)}).on("xhr.dt.dte"+this.s.unique,function(t,e,i){var n=s.s.table;n&&(n=new r.Api(n),e.nTable===n.table().node())&&s._optionsUpdate(i)}),!N.display[t.display])throw new Error("Cannot find display controller "+t.display);this.s.displayController=N.display[t.display].init(this),this._event("initComplete",[]),w(y).trigger("initEditor",[this])}});